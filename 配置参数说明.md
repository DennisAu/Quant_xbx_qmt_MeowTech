# ∞MeowTech.实盘无限守护 - 配置参数说明

> **作者**: ∞MeowTech  
> **创建时间**: 2025年06月27日 14:30  
> **版本**: 3.0  
> **配置文件位置**: `<框架根目录>/logs/guardian_config.json`  

## 📋 配置概述

本文档详细说明实盘无限守护程序中所有可配置参数的含义、取值范围、调参影响以及最佳实践建议。所有配置参数都通过程序界面进行设置，保存后自动生成JSON配置文件。

## ⏰ 时间配置参数

### 1. QMT_RESTART_TIME (QMT定时重启时间)

**参数名称**: `qmt_run_time`  
**界面位置**: 配置页面 → QMT配置组 → "QMT定时重启时间"  
**数据类型**: 字符串 (HH:MM:SS格式)  
**默认值**: "08:50:00"  

#### 功能说明
设置QMT客户端每日自动重启的时间点。重启过程包括：
1. 优雅关闭当前QMT进程
2. 自动行情源优选（测试最佳服务器）
3. 使用最佳服务器重新启动QMT
4. 确认启动成功并开始监控

#### 取值范围
- **格式**: "HH:MM:SS" (24小时制)
- **有效范围**: "00:00:00" - "23:59:59"
- **留空处理**: 留空表示不执行QMT定时重启
- **示例**: "08:50:00", "09:15:30", "07:45:00"

#### 调参影响
- **早于08:30**: 可能在集合竞价前重启，确保开盘前连接稳定
- **08:30-09:00**: 开盘前重启，推荐时间段，避免开盘时连接问题
- **09:00-15:00**: 交易时间内重启，可能影响实时交易，需谨慎
- **晚于15:00**: 收盘后重启，适合准备次日交易

#### 最佳实践
```
推荐设置: "08:50:00"
理由: 
1. 开盘前10分钟，有充足时间完成重启和连接测试
2. 避开集合竞价时间，减少对交易的影响
3. 确保开盘时使用最佳行情源
4. 预留时间处理可能的启动异常
```

### 2. QMT_SHUTDOWN_TIME (QMT定时关闭时间)

**参数名称**: `qmt_shutdown_time`  
**界面位置**: 配置页面 → QMT配置组 → "QMT定时关闭时间"  
**数据类型**: 字符串 (HH:MM:SS格式)  
**默认值**: "15:05:00"  

#### 功能说明
设置QMT客户端每日自动关闭的时间点。关闭过程采用优雅关闭机制：
1. 先发送SIGTERM信号请求程序正常退出
2. 等待程序自然关闭（保护数据完整性）
3. 超时后强制终止（防止程序卡死）

#### 取值范围
- **格式**: "HH:MM:SS" (24小时制)
- **有效范围**: "00:00:00" - "23:59:59"
- **留空处理**: 留空表示不执行QMT定时关闭
- **示例**: "15:05:00", "15:30:00", "16:00:00"

#### 调参影响
- **15:00-15:10**: 收盘后立即关闭，节省系统资源
- **15:10-16:00**: 延迟关闭，可处理盘后数据和结算
- **16:00以后**: 长时间运行，适合需要盘后分析的场景
- **留空**: 不自动关闭，需要手动管理或系统关机时关闭

#### 最佳实践
```
推荐设置: "15:05:00"
理由:
1. 收盘后5分钟，确保所有交易数据已处理完成
2. 及时释放系统资源，避免长时间占用
3. 为其他程序腾出资源空间
4. 减少不必要的网络连接和数据传输
```

### 3. RAINBOW_RESTART_TIME (彩虹客户端定时重启时间)

**参数名称**: `rainbow_restart_time`  
**界面位置**: 配置页面 → 彩虹客户端配置组 → "彩虹客户端定时重启时间"  
**数据类型**: 字符串 (HH:MM:SS格式)  
**默认值**: "08:45:00"  

#### 功能说明
设置彩虹客户端每日自动重启的时间点。重启过程包括：
1. 自动清理早盘数据文件夹（避免数据冲突）
2. 优雅关闭彩虹客户端进程
3. 重新启动彩虹客户端
4. 确认启动成功

#### 取值范围
- **格式**: "HH:MM:SS" (24小时制)
- **有效范围**: "00:00:00" - "23:59:59"
- **留空处理**: 留空表示不执行彩虹客户端定时重启
- **示例**: "08:45:00", "08:30:00", "09:00:00"

#### 调参影响
- **早于08:30**: 在集合竞价前重启，确保开盘前数据准备就绪
- **08:30-09:00**: 开盘前重启，推荐时间段
- **09:00-15:00**: 交易时间内重启，可能影响实时数据获取
- **晚于15:00**: 收盘后重启，适合数据整理和准备

#### 最佳实践
```
推荐设置: "08:45:00"
理由:
1. 比QMT重启早5分钟，确保数据源优先准备
2. 开盘前15分钟，有充足时间完成数据清理和重启
3. 避免与QMT重启时间冲突
4. 确保开盘时数据连接稳定
```

### 4. RAINBOW_SHUTDOWN_TIME (彩虹客户端定时关闭时间)

**参数名称**: `rainbow_shutdown_time`  
**界面位置**: 配置页面 → 彩虹客户端配置组 → "彩虹客户端定时关闭时间"  
**数据类型**: 字符串 (HH:MM:SS格式)  
**默认值**: "15:05:00"  

#### 功能说明
设置彩虹客户端每日自动关闭的时间点，采用优雅关闭机制保护数据完整性。

#### 取值范围
- **格式**: "HH:MM:SS" (24小时制)
- **有效范围**: "00:00:00" - "23:59:59"
- **留空处理**: 留空表示不执行彩虹客户端定时关闭
- **示例**: "15:05:00", "15:30:00", "16:00:00"

#### 调参影响
- **与QMT同时关闭**: 统一管理，简化流程
- **晚于QMT关闭**: 可继续处理数据，适合数据分析需求
- **早于QMT关闭**: 优先关闭数据源，节省资源

#### 最佳实践
```
推荐设置: "15:05:00"
理由:
1. 与QMT同时关闭，统一管理
2. 收盘后及时关闭，节省系统资源
3. 避免数据冲突和资源浪费
```

### 5. SYSTEM_SHUTDOWN_TIME (系统定时关机时间)

**参数名称**: `system_shutdown_time`  
**界面位置**: 配置页面 → 系统监控配置组 → "定时关机时间"  
**数据类型**: 字符串 (HH:MM:SS格式)  
**默认值**: "15:30:00"  

#### 功能说明
设置系统每日自动关机的时间点。关机前会：
1. 保存所有配置
2. 优雅关闭所有监控的程序
3. 清理临时文件
4. 执行系统关机命令

#### 取值范围
- **格式**: "HH:MM:SS" (24小时制)
- **有效范围**: "00:00:00" - "23:59:59"
- **留空处理**: 留空表示不执行系统定时关机
- **示例**: "15:30:00", "16:00:00", "17:00:00"

#### 调参影响
- **15:30**: 收盘后30分钟关机，适合纯交易场景
- **16:00-17:00**: 延迟关机，适合需要盘后分析的场景
- **18:00以后**: 长时间运行，适合24小时监控需求
- **留空**: 不自动关机，需要手动管理

#### 最佳实践
```
推荐设置: "15:30:00" 或留空
理由:
1. 收盘后30分钟，确保所有程序正常关闭
2. 节省电力和硬件损耗
3. 避免长时间无人值守的安全风险
4. 如需24小时运行，建议留空并使用其他方式管理
```

## 📁 路径配置参数

### 1. QMT_PATH (QMT客户端路径)

**参数名称**: `qmt_dir`  
**界面位置**: 配置页面 → QMT配置组 → "QMT路径"  
**数据类型**: 字符串 (文件路径)  
**默认值**: "C:\\Program Files\\QMT\\bin.x64\\XtItClient.exe"  

#### 功能说明
指定QMT客户端可执行文件的完整路径，用于程序启动和进程管理。

#### 取值范围
- **格式**: 完整的文件路径（包含文件名和扩展名）
- **要求**: 必须是有效的可执行文件路径
- **示例**: 
  - "C:\\Program Files\\QMT\\bin.x64\\XtItClient.exe"
  - "D:\\QMT\\XtItClient.exe"
  - "E:\\Trading\\QMT\\bin\\XtItClient.exe"

#### 调参影响
- **路径错误**: 程序无法启动QMT，所有QMT相关功能失效
- **权限不足**: 可能导致启动失败或进程管理异常
- **文件不存在**: 启动操作会失败并记录错误日志

#### 最佳实践
```
配置建议:
1. 使用完整的绝对路径，避免相对路径问题
2. 确保路径中的文件确实存在且可执行
3. 检查文件夹权限，确保程序有读取和执行权限
4. 使用双反斜杠(\\)或正斜杠(/)作为路径分隔符
5. 路径中包含空格时，程序会自动处理，无需额外引号
```

### 2. RAINBOW_PATH (彩虹客户端路径)

**参数名称**: `rainbow_exe_path`  
**界面位置**: 配置页面 → 彩虹客户端配置组 → "彩虹客户端路径"  
**数据类型**: 字符串 (文件路径)  
**默认值**: ""  

#### 功能说明
指定彩虹客户端可执行文件的完整路径，用于程序启动和进程管理。

#### 取值范围
- **格式**: 完整的文件路径（包含文件名和扩展名）
- **要求**: 必须是有效的可执行文件路径
- **示例**: 
  - "C:\\彩虹客户端\\彩虹客户端.exe"
  - "D:\\Rainbow\\rainbow.exe"
  - "E:\\Trading\\彩虹\\彩虹客户端.exe"

#### 调参影响
- **路径为空**: 彩虹客户端相关功能被禁用
- **路径错误**: 程序无法启动彩虹客户端
- **权限不足**: 可能导致启动失败或数据清理异常

#### 最佳实践
```
配置建议:
1. 如不使用彩虹客户端，可留空禁用相关功能
2. 确保路径指向正确的可执行文件
3. 检查彩虹客户端的安装完整性
4. 确保程序有足够权限操作彩虹客户端
```

### 3. DELETE_BASE_PATH (数据删除基础路径)

**参数名称**: `delete_base_path`  
**界面位置**: 配置页面 → 数据删除配置组 → "基础路径"  
**数据类型**: 字符串 (文件夹路径)  
**默认值**: ""  

#### 功能说明
指定彩虹客户端数据文件夹的基础路径，用于早盘数据清理功能。程序会在此路径下查找并删除指定的子文件夹。

#### 取值范围
- **格式**: 完整的文件夹路径
- **要求**: 必须是有效的文件夹路径
- **示例**: 
  - "C:\\彩虹客户端\\Data"
  - "D:\\Rainbow\\Data"
  - "E:\\Trading\\彩虹\\数据"

#### 调参影响
- **路径为空**: 数据清理功能被禁用
- **路径错误**: 数据清理操作失败
- **权限不足**: 可能导致删除操作失败

#### 最佳实践
```
配置建议:
1. 确保路径指向彩虹客户端的数据目录
2. 检查文件夹权限，确保程序有删除权限
3. 定期备份重要数据，避免误删
4. 如不需要数据清理功能，可留空禁用
```

### 4. DELETE_FOLDERS (删除文件夹名称)

**参数名称**: `delete_folders`  
**界面位置**: 配置页面 → 数据删除配置组 → "文件夹名称"  
**数据类型**: 字符串 (逗号分隔的文件夹名称列表)  
**默认值**: ""  

#### 功能说明
指定需要删除的文件夹名称列表，支持多个文件夹，用逗号分隔。程序会在基础路径下查找这些文件夹并删除。

#### 取值范围
- **格式**: 文件夹名称，多个用逗号分隔
- **示例**: 
  - "早盘数据"
  - "早盘数据,临时文件"
  - "temp,cache,早盘数据,log"

#### 调参影响
- **名称错误**: 对应文件夹不会被删除
- **包含重要数据**: 可能导致数据丢失
- **权限不足**: 删除操作可能失败

#### 最佳实践
```
配置建议:
1. 只删除确实需要清理的临时文件夹
2. 避免删除包含重要数据的文件夹
3. 使用英文逗号分隔多个文件夹名称
4. 文件夹名称要与实际名称完全匹配
5. 定期检查删除效果，确保配置正确
```

## 🔧 系统配置参数

### 1. QMT_ONLY_VIP (仅使用VIP服务器)

**参数名称**: `qmt_only_vip`  
**界面位置**: 配置页面 → QMT配置组 → "仅使用VIP服务器"  
**数据类型**: 布尔值 (复选框)  
**默认值**: false  

#### 功能说明
控制行情源优选时是否只考虑VIP服务器。启用后，程序只会测试和选择标记为VIP的服务器。

#### 取值范围
- **true**: 仅使用VIP服务器
- **false**: 使用所有可用服务器

#### 调参影响
- **启用VIP模式**: 
  - 优点：VIP服务器通常更稳定、延迟更低
  - 缺点：可选服务器数量减少，可能在VIP服务器异常时无备选
- **禁用VIP模式**: 
  - 优点：有更多服务器可选，容错性更好
  - 缺点：可能选择到非VIP服务器，性能可能不如VIP

#### 最佳实践
```
推荐设置: 根据账户类型决定
- VIP账户: 建议启用，享受VIP服务器的优质服务
- 普通账户: 建议禁用，确保有足够的服务器可选
- 网络环境差: 建议禁用，增加连接成功率
```

## 📊 监控配置参数

### 1. MONITOR_INTERVAL (监控间隔)

**参数名称**: `monitor_interval`  
**界面位置**: 配置页面 → 系统监控配置组 → "监控间隔(秒)"  
**数据类型**: 整数 (秒)  
**默认值**: 10  

#### 功能说明
设置系统监控的检查间隔，包括网络状态、QMT进程状态等的检查频率。

#### 取值范围
- **最小值**: 5秒
- **最大值**: 300秒
- **推荐范围**: 10-60秒
- **示例**: 10, 30, 60

#### 调参影响
- **间隔过短(< 10秒)**: 
  - 优点：状态更新更及时
  - 缺点：增加系统负载，可能影响性能
- **间隔适中(10-60秒)**: 
  - 平衡及时性和性能
- **间隔过长(> 60秒)**: 
  - 优点：减少系统负载
  - 缺点：状态更新延迟，可能错过重要事件

#### 最佳实践
```
推荐设置: 10-30秒
理由:
1. 10秒：适合需要及时响应的交易环境
2. 30秒：适合一般监控需求，平衡性能和及时性
3. 60秒：适合资源受限的环境
```

### 2. NOTIFICATION_INTERVAL (通知间隔)

**参数名称**: `notification_interval`  
**界面位置**: 配置页面 → 系统监控配置组 → "通知间隔(秒)"  
**数据类型**: 整数 (秒)  
**默认值**: 300  

#### 功能说明
设置相同类型通知的最小发送间隔，防止频繁发送相同通知造成干扰。

#### 取值范围
- **最小值**: 60秒
- **最大值**: 3600秒
- **推荐范围**: 300-1800秒
- **示例**: 300, 600, 1800

#### 调参影响
- **间隔过短(< 300秒)**: 
  - 可能收到过多重复通知
  - 影响通知的有效性
- **间隔适中(300-1800秒)**: 
  - 平衡通知及时性和频率
- **间隔过长(> 1800秒)**: 
  - 可能错过重要状态变化
  - 通知响应不够及时

#### 最佳实践
```
推荐设置: 300秒(5分钟)
理由:
1. 避免短时间内重复通知
2. 确保重要事件能够及时通知
3. 平衡通知频率和有效性
```

## 📱 飞书通知配置

### 1. ENABLE_FEISHU_NOTIFICATION (启用飞书通知)

**参数名称**: `enable_feishu_notification`  
**界面位置**: 配置页面 → 系统监控配置组 → "启用飞书通知"  
**数据类型**: 布尔值 (复选框)  
**默认值**: false  

#### 功能说明
控制是否启用飞书通知功能。启用后，系统状态变化会通过飞书Webhook发送通知。

#### 取值范围
- **true**: 启用飞书通知
- **false**: 禁用飞书通知

#### 调参影响
- **启用**: 可以及时接收系统状态通知，便于远程监控
- **禁用**: 不会发送任何飞书通知，需要其他方式监控

#### 最佳实践
```
推荐设置: 根据需求决定
- 需要远程监控: 建议启用
- 本地使用: 可以禁用
- 团队协作: 建议启用，便于团队了解系统状态
```

### 2. FEISHU_WEBHOOK_URL (飞书Webhook地址)

**参数名称**: `feishu_webhook_url`  
**界面位置**: 配置页面 → 系统监控配置组 → "飞书Webhook URL"  
**数据类型**: 字符串 (URL)  
**默认值**: ""  

#### 功能说明
飞书机器人的Webhook地址，用于发送通知消息。

#### 取值范围
- **格式**: 完整的HTTPS URL
- **示例**: "https://open.feishu.cn/open-apis/bot/v2/hook/xxxxxxxx"
- **要求**: 必须是有效的飞书Webhook URL

#### 调参影响
- **URL错误**: 通知发送失败
- **URL为空**: 飞书通知功能无法使用
- **权限不足**: 可能导致发送失败

#### 最佳实践
```
配置建议:
1. 从飞书群聊中创建机器人获取Webhook URL
2. 确保URL完整且有效
3. 定期检查机器人权限和状态
4. 保护Webhook URL，避免泄露
```

### 3. FEISHU_AT_ALL (@所有人)

**参数名称**: `feishu_at_all`  
**界面位置**: 配置页面 → 系统监控配置组 → "@所有人"  
**数据类型**: 布尔值 (复选框)  
**默认值**: false  

#### 功能说明
控制飞书通知是否@所有人。启用后，重要通知会@所有群成员。

#### 取值范围
- **true**: 通知时@所有人
- **false**: 普通通知，不@任何人

#### 调参影响
- **启用@所有人**: 
  - 优点：确保重要通知被及时看到
  - 缺点：可能造成过度打扰
- **禁用@所有人**: 
  - 优点：减少对群成员的打扰
  - 缺点：重要通知可能被忽略

#### 最佳实践
```
推荐设置: 根据团队需求决定
- 关键系统: 建议启用，确保及时响应
- 测试环境: 建议禁用，减少干扰
- 小团队: 可以启用，便于协作
- 大团队: 建议禁用，避免过度打扰
```

### 4. NOTIFICATION_TIME_RANGE (通知时间范围)

**参数名称**: `notification_start_time`, `notification_end_time`  
**界面位置**: 配置页面 → 系统监控配置组 → "通知开始时间" / "通知结束时间"  
**数据类型**: 字符串 (HH:MM:SS格式)  
**默认值**: "08:00:00" / "16:00:00"  

#### 功能说明
设置飞书通知的有效时间范围，只在指定时间段内发送通知。

#### 取值范围
- **格式**: "HH:MM:SS" (24小时制)
- **有效范围**: "00:00:00" - "23:59:59"
- **示例**: 
  - 开始时间: "08:00:00"
  - 结束时间: "16:00:00"

#### 调参影响
- **时间范围过窄**: 可能错过重要通知
- **时间范围过宽**: 可能在非工作时间收到通知
- **24小时通知**: 适合需要全天候监控的场景

#### 最佳实践
```
推荐设置: "08:00:00" - "16:00:00"
理由:
1. 覆盖交易时间和准备时间
2. 避免非工作时间的打扰
3. 确保工作时间内的及时通知
4. 可根据实际需求调整时间范围
```

## 📝 配置文件管理

### 配置文件结构
```json
{
  "qmt_dir": "C:\\Program Files\\QMT\\bin.x64\\XtItClient.exe",
  "qmt_run_time": "08:50:00",
  "qmt_shutdown_time": "15:05:00",
  "qmt_only_vip": false,
  "rainbow_exe_path": "C:\\彩虹客户端\\彩虹客户端.exe",
  "rainbow_restart_time": "08:45:00",
  "rainbow_shutdown_time": "15:05:00",
  "delete_base_path": "C:\\彩虹客户端\\Data",
  "delete_folders": "早盘数据,临时文件",
  "system_shutdown_time": "15:30:00",
  "monitor_interval": 10,
  "notification_interval": 300,
  "notification_start_time": "08:00:00",
  "notification_end_time": "16:00:00",
  "enable_feishu_notification": true,
  "feishu_webhook_url": "https://open.feishu.cn/open-apis/bot/v2/hook/xxx",
  "feishu_at_all": false
}
```

### 配置管理最佳实践

1. **定期备份配置文件**
   - 位置：`<框架根目录>/logs/guardian_config.json`
   - 建议：每次重大修改后备份

2. **配置验证**
   - 程序启动时自动验证配置
   - 无效配置会使用默认值
   - 保存配置时进行格式检查

3. **配置迁移**
   - 新版本会自动合并新增配置项
   - 保持向后兼容性
   - 建议升级前备份配置

4. **安全注意事项**
   - 保护飞书Webhook URL
   - 定期检查配置文件权限
   - 避免在配置中存储敏感信息

---

**技术支持**: ∞MeowTech  
**更新日期**: 2025年01月27日  
**文档版本**: 3.0